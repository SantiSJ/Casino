<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>My first three.js app</title>
        <style>
            body { margin: 0; }
        </style>
    </head>
    <body>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r119/three.min.js"></script>
        <script src= "./js/inflate.min.js"></script>
        <script src="./js/FBXLoader.js"></script>
        <script src="./js/OrbitControls.js"></script>

        <script>
            const scene = new THREE.Scene();
			const camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 0.1, 10000 );
            const controls = new THREE.OrbitControls(camera);
			const renderer = new THREE.WebGLRenderer();
			renderer.setSize( window.innerWidth, window.innerHeight );
			document.body.appendChild( renderer.domElement );

            renderer.shadowMap.enabled = true;

		    renderer.shadowMap.type = THREE.PCFSoftShadowMap;


            


            //mas luces xd
            const light = new THREE.AmbientLight( 0xffffff,0.5 ); // soft white light
            scene.add( light ); 

            //luz de entrada cartel   
            
            const spotLight = new THREE.SpotLight( 0xffffff, 3 );
				spotLight.position.set( -1500, 1000, -1800 );
				spotLight.angle = Math.PI / 12;
				spotLight.penumbra = 0.1;
				spotLight.decay = 2;
				spotLight.distance = 5000;

				spotLight.castShadow = true;
                

				scene.add( spotLight );


                //luz de entrada barra de bar y sillas
                const spotLight1 = new THREE.SpotLight( 0xffffff, 3 );
				spotLight1.position.set( -100, 800, -700 );
				spotLight1.angle = Math.PI / 12;
				spotLight1.penumbra = 0.1;
				spotLight1.decay = 2;
				spotLight1.distance = 1500;

				spotLight1.castShadow = true;
                

				scene.add( spotLight1 );

            
                //luces del billar y los sofas
                const light1 = new THREE.PointLight( 0x012275, 1, 1000 );
                light1.decay = 2;
                light1.position.set( 300, 400,200 );
                
                light1.castShadow = true; // default false
                scene.add( light1 );
                const light6 = new THREE.PointLight( 0x012275, 1, 1000 );
                light6.decay = 2;
                light6.position.set( 600, 400,200 );
                
                light6.castShadow = true; // default false
                scene.add( light6 );
                const light2 = new THREE.PointLight( 0x012275, 1, 1000 );
                light2.decay = 2;
                light2.position.set( -500, 400, 200 );
                
                light2.castShadow = true; // default false
                scene.add( light2 );


                //luces de las maquinas
                const light3 = new THREE.PointLight( 0x8A1D00, 1, 1000 );
                light3.decay = 2;
                light3.position.set( 0, 400, 800 );
                
                light3.castShadow = true; // default false
                scene.add( light3 );

                const light4 = new THREE.PointLight( 0x8A1D00, 1, 1000 );
                light4.decay = 2;
                light4.position.set( 200, 400, 800 );
                
                light4.castShadow = true; // default false
                scene.add( light4 );

                const light5 = new THREE.PointLight( 0x8A1D00, 1, 1000 );
                light5.decay = 2;
                light5.position.set( 500, 400, 800 );
                
                light5.castShadow = true; // default false
                scene.add( light5 );

                




/* 
            const spotLight = new THREE.SpotLight( 0xffffff );
			spotLight.position.set( -1000, 1000, -100 );
            spotLight.intensity = 1;
			spotLight.castShadow = true;
            spotLight.angle = 0.50*Math.PI / 5;
			spotLight.shadow.focus = 0;
            spotLight.shadow.mapSize.width = 1000; // default
         spotLight.shadow.mapSize.height = 1000; // default
         spotLight.shadow.camera.near = 1; // default
         spotLight.shadow.camera.far = 500; // default
         spotLight.shadow.focus = 1; 
            
			scene.add( spotLight ); */


            //texturas
			const texture = new THREE.TextureLoader().load( "madera.jpg" );
			texture.wrapS = THREE.RepeatWrapping;
			texture.wrapT = THREE.RepeatWrapping;
			texture.repeat.set( 15, 15 );

            const texture1 = new THREE.TextureLoader().load( "sillas.jpg" );
			texture1.wrapS = THREE.RepeatWrapping;
			texture1.wrapT = THREE.RepeatWrapping;
			texture1.repeat.set( 15, 20 );

            const texture2 = new THREE.TextureLoader().load( "tableroruleta.jpg" );
			texture2.wrapS = THREE.RepeatWrapping;
			texture2.wrapT = THREE.RepeatWrapping;
			texture2.repeat.set( 15, 15 );

            const texture3 = new THREE.TextureLoader().load( "sofas.jpg" );
			texture3.wrapS = THREE.RepeatWrapping;
			texture3.wrapT = THREE.RepeatWrapping;
			texture3.repeat.set( 10, 15 );

            const texture4 = new THREE.TextureLoader().load( "pantallabaja.jpg" );
			texture4.wrapS = THREE.RepeatWrapping;
			texture4.wrapT = THREE.RepeatWrapping;
			texture4.repeat.set( 4, 4 );

            const texture5 = new THREE.TextureLoader().load( "pantalla.jpg" );
			texture5.wrapS = THREE.RepeatWrapping;
			texture5.wrapT = THREE.RepeatWrapping;
			texture5.repeat.set( 4, 4 );

            const texture6 = new THREE.TextureLoader().load( "alfombra.jpg" );
			texture6.wrapS = THREE.RepeatWrapping;
			texture6.wrapT = THREE.RepeatWrapping;
			texture6.repeat.set( 15, 15 );

            const texture7 = new THREE.TextureLoader().load( "pared.jpg" );
			texture7.wrapS = THREE.RepeatWrapping;
			texture7.wrapT = THREE.RepeatWrapping;
			texture7.repeat.set( 15, 15 );

            const texture8 = new THREE.TextureLoader().load( "metal.jpg" );
			texture8.wrapS = THREE.RepeatWrapping;
			texture8.wrapT = THREE.RepeatWrapping;
			texture8.repeat.set( 2, 2 );

            const texture9 = new THREE.TextureLoader().load( "tableroruleta.jpg" );
			texture9.wrapS = THREE.RepeatWrapping;
			texture9.wrapT = THREE.RepeatWrapping;
			texture9.repeat.set( 1.010, 1 );

            const texture10 = new THREE.TextureLoader().load( "ruleta.jpg" );
			texture10.wrapS = THREE.RepeatWrapping;
			texture10.wrapT = THREE.RepeatWrapping;
			texture10.repeat.set( 15, 5 );

            const texture11 = new THREE.TextureLoader().load( "metal.jpg" );
			texture11.wrapS = THREE.RepeatWrapping;
			texture11.wrapT = THREE.RepeatWrapping;
			texture11.repeat.set( 10, 10 );


            const texture12 = new THREE.TextureLoader().load( "black.jpg" );
			texture12.wrapS = THREE.RepeatWrapping;
			texture12.wrapT = THREE.RepeatWrapping;
			texture12.repeat.set( 2.3, 1.3 );

            const texture13 = new THREE.TextureLoader().load( "casino.jpg" );
            texture13.wrapS = THREE.RepeatWrapping;
			texture13.wrapT = THREE.RepeatWrapping;
			texture13.repeat.set( 2, 3 );

            const texture14 = new THREE.TextureLoader().load( "maderanormal.jpg" );
            texture14.wrapS = THREE.RepeatWrapping;
			texture14.wrapT = THREE.RepeatWrapping;
			texture14.repeat.set( 10, 10 );
            //luces

            

            //Escena

            
            //vamos a cargar el fbx
            const loaderM = new THREE.FBXLoader();
                loaderM.load( 'taller9.fbx', function ( object ) {

                    object.traverse( function ( child ) {

                        if ( child.isMesh ) {



                            //estamos a√±adiendo la textura a la geometria de maya
                            if(child.name=="barrabar"){

                                child.material = new THREE.MeshPhongMaterial({
                                    color: 0xfffffff,
                                    map: texture,
                                    
                 
                                    
                                });
                                child.castShadow = true;
                            child.receiveShadow = true;

                            }
                            if(child.name=="mesaruleta"){

                                child.material = new THREE.MeshPhongMaterial({
                                color: 0xfffffff,
                                map: texture,
                    
                                    normalMap: texture14,

                                });
                            }
                            if(child.name=="mesablackjack"){

                                child.material = new THREE.MeshPhongMaterial({
                                color: 0xfffffff,
                                map: texture,
                          
                                    normalMap: texture14,

                                });
                            }
                            if(child.name=="sillas_juegos"){

                                child.material = new THREE.MeshPhongMaterial({
                                color: 0xfffffff,
                                map: texture1,
                                
                       

                                });
                                child.castShadow = true;
                            child.receiveShadow = false;
                            }
                            if(child.name=="sofas"){

                                child.material = new THREE.MeshPhongMaterial({
                                color: 0xfffffff,
                                map: texture3,
                       

                                });
                                child.castShadow = true;
                            child.receiveShadow = false;
                            }
                            if(child.name=="pared"){

                                child.material = new THREE.MeshPhongMaterial({
                                color: 0xfffffff,
                                map: texture7,
                            

                                });
                            child.receiveShadow = false;
                            }
                            if(child.name=="piso"){

                                child.material = new THREE.MeshPhongMaterial({
                                color: 0xfffffff,
                                map: texture6,
                              
                                    

                                });
                                child.receiveShadow = true;
                                }
                            if(child.name=="pantallatraga2"){

                                child.material = new THREE.MeshPhongMaterial({
                                color: 0xfffffff,
                                map: texture5,
                              
                                

                                });
                                child.castShadow = true;
                            child.receiveShadow = false;
                                }
                                if(child.name=="pantallabajotraga"){

                                    child.material = new THREE.MeshPhongMaterial({
                                    color: 0xfffffff,
                                    map: texture4,
                             

                                    });
                                    child.castShadow = true;
                            child.receiveShadow = false;
                                    }
                                if(child.name=="tragamonedas"){

                                    child.material = new THREE.MeshPhongMaterial({
                                    color: 0xfffffff,
                                    map: texture8,
                           
                                    });
                                    child.castShadow = true;
                            child.receiveShadow = false;
                                    }
                                    if(child.name=="encimerablackjack"){

                                    child.material = new THREE.MeshPhongMaterial({
                                    color: 0xfffffff,
                                    map: texture9,
                              

                                    });
                                    child.castShadow = true;
                            child.receiveShadow = false;
                                }
                                    if(child.name=="ruletica"){

                                    child.material = new THREE.MeshPhongMaterial({
                                    color: 0xfffffff,
                                    map: texture10,
                              
                                    });
                                    child.castShadow = true;
                            child.receiveShadow = false;
}
                                    if(child.name=="ruletita"){

                                    child.material = new THREE.MeshPhongMaterial({
                                    color: 0xfffffff,
                                    map: texture11,
                               

                                    });
                                    child.castShadow = true;
                            child.receiveShadow = false;
}
                                    if(child.name=="elblackjack"){

                                    child.material = new THREE.MeshPhongMaterial({
                                    color: 0xfffffff,
                                    map: texture12,
                            
                                    });
                                    child.castShadow = true;
                                    child.receiveShadow = false;
}
                                    if(child.name=="letrero"){

                                    child.material = new THREE.MeshPhongMaterial({
                                    color: 0xfffffff,
                                    map: texture13,
                              

                                    });
                                    child.castShadow = true;
                            child.receiveShadow = false;
                                    }
                                    if(child.name=="baseletrero"){

                                    child.material = new THREE.MeshPhongMaterial({
                                    color: 0xfffffff,
                                    map: texture11,
                             

                                    });
                                    child.castShadow = true;
                            child.receiveShadow = false;
                                    }
                                    if(child.name=="sillasbar"){

                                    child.material = new THREE.MeshPhongMaterial({
                                    color: 0xfffffff,
                                    map: texture1,


                                 

                            });
                            child.castShadow = true;
                            child.receiveShadow = false;                                

}




                        }

                    } );
                    object.position.y-=1;
                    object.position.z-=2;

                scene.add( object );


            } );

            camera.position.z = 500;
            camera.position.y= 100;
           
      

            const animate = function () {
                requestAnimationFrame( animate );

                renderer.render( scene, camera );
            };


            animate();
        </script>
    </body>
</html>